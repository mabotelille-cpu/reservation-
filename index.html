<form id="f" action="https://formspree.io/f/meovonbe" method="POST">
  <label>Nom</label>
  <input name="nom" required>

  <label>Adresse</label>
  <input name="adresse" required>

  <label>Email</label>
  <input name="email" type="email" required>

  <label>Téléphone</label>
  <input name="telephone" type="tel" required>

  <label>Comment avez-vous connu Maison Mabôté ?</label>
  <select name="origine" id="origine" required onchange="autreShow(this.value)">
    <option value="" disabled selected>Sélectionnez</option>
    <option value="Facebook">Facebook</option>
    <option value="Instagram">Instagram</option>
    <option value="Tiktok">TikTok</option>
    <option value="Google">Google</option>
    <option value="Bouche à oreille">Bouche à oreille</option>
    <option value="Autre">Autre : précisez ci-dessous</option>
  </select>
  <input name="autre_origine" id="autre_origine" style="display:none;margin-top:8px;" placeholder="Précisez..." />

  <label style="margin-top:18px;">
    <input type="checkbox" name="newsletter" value="Oui">
    Je souhaite recevoir les nouveautés, offres et conseils de Maison Mabôté par email.
  </label>

  <label style="font-size:0.9em;margin-top:10px;">
    <input type="checkbox" name="rgpd_consent" required>
    J'accepte que mes données soient collectées pour organiser ma réservation et recevoir des informations de Maison Mabôté, conformément au RGPD. <br>
    <a href="#" target="_blank" style="color:#803d4a;">Voir la politique de confidentialité</a>
  </label>

  <button type="submit">Continuer vers la réservation</button>
</form>

<small>Vos données sont utilisées uniquement pour la gestion de votre RDV et l’information Maison Mabôté. Elles ne seront jamais revendues ni utilisées à d’autres fins. Vous pouvez demander leur suppression à tout moment.</small>

<script>
function autreShow(val) {
  document.getElementById('autre_origine').style.display = (val === 'Autre') ? 'block' : 'none';
}
document.getElementById('f').addEventListener('submit', function(e) {
  e.preventDefault();
  const form = new FormData(this);
  const nom = form.get('nom');
  fetch(this.action, {
    method: "POST",
    body: form,
    headers: { 'Accept': 'application/json' }
  }).then(() => {
    window.location.href = "https://www.supersaas.fr/schedule/Mabote/Mabôté?name=" + encodeURIComponent(nom);
  });
});
</script>
