<form id="f" action="https://formspree.io/f/meovonbe" method="POST">
  <label>Nom</label>
  <input name="nom" required>

  <label>Adresse</label>
  <input name="adresse" required>

  <label>Email</label>
  <input name="email" type="email" required>

  <label>Téléphone</label>
  <input name="telephone" type="tel" required>

  <label>Comment avez-vous connu Maison Mabôté ?</label>
  <select name="origine" id="origine" required onchange="autreShow(this.value)">
    <option value="" disabled selected>Sélectionnez</option>
    <option value="Facebook">Facebook</option>
    <option value="Instagram">Instagram</option>
    <option value="Tiktok">TikTok</option>
    <option value="Google">Google</option>
    <option value="Bouche à oreille">Bouche à oreille</option>
    <option value="Autre">Autre : précisez ci-dessous</option>
  </select>
  <input name="autre_origine" id="autre_origine" style="display:none;margin-top:8px;" placeholder="Précisez..." />

  <button type="submit">Continuer vers la réservation</button>
</form>

<script>
function autreShow(val) {
  document.getElementById('autre_origine').style.display = (val === 'Autre') ? 'block' : 'none';
}
document.getElementById('f').addEventListener('submit', function(e) {
  e.preventDefault();
  const form = new FormData(this);
  const nom = form.get('nom');
  fetch(this.action, {
    method: "POST",
    body: form,
    headers: { 'Accept': 'application/json' }
  }).then(() => {
    window.location.href = "https://www.supersaas.fr/schedule/Mabote/Mabôté?name=" + encodeURIComponent(nom);
  });
});
</script>
